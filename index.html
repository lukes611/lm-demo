<html>
<head>
  <title>luke's monopoly game</title> 
  <link rel="stylesheet" type="text/css" href="LMstyles.css">
</head>
<body>
	<div id="primary_box">
	<canvas id="myCanvas" width="512" height="512"></canvas>
	<div id="game_injection">
		<div id="game_player_options">
			<div id="game_player_options_name">Jasmine's Turn</div>
			
		</div>
		<div id="game_injection_players">
			loading player list...
		</div>
	</div>
	</div>
	<button onclick="test();">refresh</button>
	<img src="ims/dog.png">
	<img src="ims/car.png">
<script src="LMDice.js"></script>
<script src="LMGraphics.js"></script>
<script src="monopolydata.js"></script>
<script src="LMPlayer.js"></script>
<script src="LMGame.js"></script>
<script>






function update_player_stats(game)
{
	var e = document.getElementById('game_injection_players');
	e.innerHTML = game.get_player_stats_injection();
}





var game = new LMGame('myCanvas', {'w':512, 'h':512}, GameData);
game.add_player('luke', 'car');
game.add_player('jasmine', 'boot');
game.add_player('thao', 'dog');
game.add_player('michael', 'hat');




function renderer()
{
	game.render();
	update_player_stats(game);
	requestAnimationFrame(renderer);
}


setTimeout(function()
{
	game.graphx.clear();
	renderer();
}, 1000);


function lmpo()
{
	this.list = new Array();
	this.lmove = function(p, n)
	{
		if(p == undefined || n == undefined)
		{
			var mpo = {'p': 0, 'n' : 0, 'stop' : true};
			this.list.push(mpo);
		}else
		{
			var mpo = {'p': p, 'n' : n, 'stop' : false};
			this.list.push(mpo);
		}
		return this;
	};
		
	this.exec = function()
	{
		var th = this;
		(function tmp_e()
		{
			if(th.list.length == 0){ return; }
			var o = th.list.shift();
			if(o.stop) { return; }
			game.playersTurn = o.p;
			game.move_player(o.p, o.n, tmp_e);
		})();
	};
		
}

function lmove(p, n)
{
	var rv = new lmpo();
	rv.lmove(p,n);
	return rv;
}

setTimeout(function(){

lmove(2, 1).lmove(0, 2).lmove(3, 2).lmove(1, 4).lmove(3, 5).lmove(0,5).exec();

}, 1000);


function test()
{
}

//move_player1(game.players[0], function c(){});

</script>
<pre>
function setup:
	setup players (names, number of them, figurines)
	initialize all properties and randomize cards
function iterate:
	play(player)
	player++;
function play:
	roll dice : "give dice value"
	move : "move player, let them know what they landed on / if they pass go and what to increase the money to"
	if land on property:
		if owned:
			pay fee required "let player know"
		if unowned:
			wants to buy:
				take out money
			else:
				go for auction:
					ask every player for a bet
	if land on go: "give $200"
	if land on community chest / chance:
		pick card "give card value"
		take card effect
	if invoice tax / super tax:
		"let them know their fate"
		take out the money
	if jail:
		do nothing
	if free parking:
		do nothing
	if gotojail:
		"let them know their fate, move them to jail"
		setup player to be in jail
		
	
	
</pre>
	

</body>
</html>